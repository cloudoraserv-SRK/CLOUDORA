<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Candidate Agreement</title>

<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="./job.css">

<style>
.agreement-box {
  background: #ffffff;
  padding: 28px;
  border-radius: 18px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.06);
  max-width: 980px;
  margin: 36px auto;
  font-size: 15px;
  line-height: 1.6;
}
.agreement-title { font-size: 22px; font-weight: 800; text-align:center; margin-bottom:8px; }
.notice { background:#fef3c7; padding:12px; border-radius:10px; margin-bottom:18px; border-left:5px solid #f59e0b; font-weight:600; }
.controls { display:flex; gap:8px; align-items:center; }
.next-btn { margin-top:18px; width:100%; background:#6366f1; border:none; padding:12px; font-size:16px; font-weight:600; color:white; border-radius:10px; cursor:pointer; }
.next-btn[disabled] { background:#9ca3af; cursor:not-allowed; }
.status { margin-top:12px; padding:10px; border-radius:8px; display:none; }
.status.error { background:#fee2e2; color:#991b1b; display:block; }
.status.success { background:#ecfdf5; color:#065f46; display:block; }
</style>
</head>

<body>

<header class="site-header">
  <div class="brand">Cloudora Genie</div>
  <div class="controls">
    <select id="langSelect"></select>
    <button id="speakBtn">üîä</button>
  </div>
</header>


<main class="container fade-in">

  <div class="agreement-box" role="main" aria-labelledby="title">
    <div id="title" class="agreement-title">Candidate Agreement</div>

    <div id="notice" class="notice">Please read the agreement carefully before continuing.</div>

    <div id="agreementContent" aria-live="polite"></div>

    <div style="margin-top:20px; display:flex; align-items:center; gap:10px;">
      <input type="checkbox" id="agreeCheck" aria-label="I agree to the terms">
      <label id="agreeLabel" for="agreeCheck">I have read and agree to all terms</label>
    </div>

    <button id="nextBtn" disabled class="next-btn">Proceed</button>

    <div id="statusMsg" class="status" role="status" aria-live="assertive"></div>
    <div class="small-muted">By proceeding you accept Cloudora's trial terms and policies.</div>
  </div>

</main>

<script>
/* ============================================================
   Cloudora ‚Äì Agreement Page Script (FINAL FULL VERSION)
   Depends on: global.js (window.CONFIG, language, speak)
============================================================ */

(function () {

  /* ---------------- SAFETY ---------------- */
  if (!window.CONFIG) {
    alert("Global configuration not loaded. Please refresh.");
    return;
  }

  /* ---------------- ELEMENTS ---------------- */
  const agreeCheck = document.getElementById("agreeCheck");
  const nextBtn = document.getElementById("nextBtn");
  const statusMsg = document.getElementById("statusMsg");
  const agreementContent = document.getElementById("agreementContent");

  /* ---------------- LEAD UID ---------------- */
  const params = new URLSearchParams(window.location.search);
  const lead_uid = params.get("lead");

  /* ---------------- FULL AGREEMENT TEXT ---------------- */
  const AGREEMENT = {
    en: `
<h3>1. Overview</h3>
<p>
You are applying for a <b>7-day trial assignment</b> under the Cloudora Genie workforce program.
This trial period is intended to evaluate your skills, discipline, and suitability for remote or hybrid work.
</p>

<h3>2. Nature of Engagement</h3>
<ul>
  <li>This is a <b>trial-based engagement</b>, not a permanent employment contract.</li>
  <li>No fixed salary is guaranteed during the trial period.</li>
  <li>Performance-based incentives, bonuses, or continuation opportunities may be offered.</li>
</ul>

<h3>3. Departments Covered</h3>
<ul>
  <li><b>Telecalling ‚Äì Lead Generation</b>
    <ul>
      <li>Call leads strictly provided by Cloudora systems.</li>
      <li>Update CRM accurately after every call.</li>
      <li>No abusive, misleading, or unprofessional language is allowed.</li>
    </ul>
  </li>
  <li><b>Sales ‚Äì Domestic / International</b>
    <ul>
      <li>Handle warm leads transferred by the telecalling team.</li>
      <li>Clearly explain Cloudora services, pricing, and policies.</li>
      <li>No false promises or unauthorized commitments.</li>
    </ul>
  </li>
</ul>

<h3>4. Attendance & Shift Discipline</h3>
<ul>
  <li>You must log in daily using the Cloudora Genie dashboard.</li>
  <li>You are required to follow the selected shift timing.</li>
  <li>Uninformed absence or irregular attendance may lead to removal.</li>
</ul>

<h3>5. Performance & Conduct Rules</h3>
<ul>
  <li>All activities must be logged truthfully in the system.</li>
  <li>Fake updates, skipped calls, or manipulated data are strictly prohibited.</li>
  <li>Any misuse of company resources will result in immediate termination.</li>
</ul>

<h3>6. Confidentiality & Data Protection</h3>
<ul>
  <li>All lead data, scripts, dashboards, and CRM information are confidential.</li>
  <li>Sharing data outside Cloudora platforms is strictly forbidden.</li>
  <li>Violation may lead to legal action.</li>
</ul>

<h3>7. Termination Policy</h3>
<ul>
  <li>Cloudora reserves the right to terminate the trial at any time.</li>
  <li>No compensation is guaranteed upon termination during trial.</li>
</ul>

<h3>8. Declaration</h3>
<p>
By proceeding, you confirm that:
</p>
<ul>
  <li>All information submitted by you is true and accurate.</li>
  <li>You voluntarily agree to participate in the 7-day trial.</li>
  <li>You accept all terms, rules, and policies stated above.</li>
</ul>
`,

    hi: `
<h3>1. ‡§™‡§∞‡§ø‡§ö‡§Ø</h3>
<p>
‡§Ü‡§™ Cloudora Genie ‡§µ‡§∞‡•ç‡§ï‡§´‡•ã‡§∞‡•ç‡§∏ ‡§™‡•ç‡§∞‡•ã‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ï‡•á ‡§Ö‡§Ç‡§§‡§∞‡•ç‡§ó‡§§ <b>7-‡§¶‡§ø‡§® ‡§ï‡•á ‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤</b> ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ü‡§µ‡•á‡§¶‡§® ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§
‡§Ø‡§π ‡§Ö‡§µ‡§ß‡§ø ‡§Ü‡§™‡§ï‡•á ‡§ï‡•å‡§∂‡§≤, ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§® ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∑‡§Æ‡§§‡§æ ‡§ï‡§æ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø‡§æ‡§Ç‡§ï‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à‡•§
</p>

<h3>2. ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡§æ ‡§∏‡•ç‡§µ‡§∞‡•Ç‡§™</h3>
<ul>
  <li>‡§Ø‡§π ‡§è‡§ï <b>‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§</b> ‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ ‡§π‡•à, ‡§∏‡•ç‡§•‡§æ‡§Ø‡•Ä ‡§®‡•å‡§ï‡§∞‡•Ä ‡§®‡§π‡•Ä‡§Ç‡•§</li>
  <li>‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§Ö‡§µ‡§ß‡§ø ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§µ‡•á‡§§‡§® ‡§®‡§π‡•Ä‡§Ç ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ‡•§</li>
  <li>‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§á‡§Ç‡§∏‡•á‡§Ç‡§ü‡§ø‡§µ ‡§Ø‡§æ ‡§Ü‡§ó‡•á ‡§ï‡§æ ‡§Ö‡§µ‡§∏‡§∞ ‡§Æ‡§ø‡§≤ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§</li>
</ul>

<h3>3. ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§µ‡§ø‡§≠‡§æ‡§ó</h3>
<ul>
  <li><b>‡§ü‡•á‡§≤‡•Ä‡§ï‡•â‡§≤‡§ø‡§Ç‡§ó ‚Äì ‡§≤‡•Ä‡§° ‡§ú‡§®‡§∞‡•á‡§∂‡§®</b>
    <ul>
      <li>‡§∏‡§ø‡§∞‡•ç‡§´ Cloudora ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§¶‡§ø‡§è ‡§ó‡§è ‡§≤‡•Ä‡§°‡•ç‡§∏ ‡§™‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡§®‡§æ‡•§</li>
      <li>‡§π‡§∞ ‡§ï‡•â‡§≤ ‡§ï‡•á ‡§¨‡§æ‡§¶ CRM ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡•§</li>
      <li>‡§ó‡§≤‡§§ ‡§Ø‡§æ ‡§Ö‡§≠‡§¶‡•ç‡§∞ ‡§≠‡§æ‡§∑‡§æ ‡§∏‡§ñ‡•ç‡§§ ‡§Æ‡§®‡§æ ‡§π‡•à‡•§</li>
    </ul>
  </li>
  <li><b>‡§∏‡•á‡§≤‡•ç‡§∏ ‚Äì ‡§°‡•ã‡§Æ‡•á‡§∏‡•ç‡§ü‡§ø‡§ï / ‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§∂‡§®‡§≤</b>
    <ul>
      <li>‡§µ‡§æ‡§∞‡•ç‡§Æ ‡§≤‡•Ä‡§°‡•ç‡§∏ ‡§ï‡•ã ‡§∏‡§Ç‡§≠‡§æ‡§≤‡§®‡§æ‡•§</li>
      <li>Cloudora ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡§π‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§¶‡•á‡§®‡§æ‡•§</li>
    </ul>
  </li>
</ul>

<h3>4. ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§î‡§∞ ‡§∂‡§ø‡§´‡•ç‡§ü</h3>
<ul>
  <li>‡§™‡•ç‡§∞‡§§‡§ø‡§¶‡§ø‡§® Cloudora Genie ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§° ‡§™‡§∞ ‡§≤‡•â‡§ó‡§ø‡§® ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡•§</li>
  <li>‡§ö‡•Å‡§®‡•Ä ‡§ó‡§à ‡§∂‡§ø‡§´‡•ç‡§ü ‡§ï‡§æ ‡§™‡§æ‡§≤‡§® ‡§ï‡§∞‡§®‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§</li>
</ul>

<h3>5. ‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø‡§§‡§æ ‡§î‡§∞ ‡§®‡§ø‡§Ø‡§Æ</h3>
<ul>
  <li>‡§≤‡•Ä‡§° ‡§î‡§∞ CRM ‡§°‡•á‡§ü‡§æ ‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø ‡§π‡•à‡•§</li>
  <li>‡§°‡•á‡§ü‡§æ ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§µ‡§æ‡§π‡•Ä ‡§π‡•ã‡§ó‡•Ä‡•§</li>
</ul>

<h3>6. ‡§ò‡•ã‡§∑‡§£‡§æ</h3>
<p>
‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§ï‡§∞ ‡§Ü‡§™ ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§¶‡•Ä ‡§ó‡§à ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§π‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§Ü‡§™ ‡§∏‡•ç‡§µ‡•á‡§ö‡•ç‡§õ‡§æ ‡§∏‡•á ‡§á‡§∏ ‡§ü‡•ç‡§∞‡§æ‡§Ø‡§≤ ‡§Æ‡•á‡§Ç ‡§≠‡§æ‡§ó ‡§≤‡•á ‡§∞‡§π‡•á ‡§π‡•à‡§Ç‡•§
</p>
`
  };

  /* ---------------- UI HELPERS ---------------- */
  function showStatus(type, msg) {
    statusMsg.className = "status " + type;
    statusMsg.innerText = msg;
    statusMsg.style.display = "block";
  }

  function clearStatus() {
    statusMsg.style.display = "none";
    statusMsg.innerText = "";
  }

  /* ---------------- RENDER ---------------- */
  function renderAgreement() {
    const lang = window.CONFIG.LANG || "en";
    agreementContent.innerHTML = AGREEMENT[lang] || AGREEMENT.en;

    document.getElementById("title").innerText =
      lang === "hi" ? "‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶‡§µ‡§æ‡§∞ ‡§Ö‡§®‡•Å‡§¨‡§Ç‡§ß" : "Candidate Agreement";

    document.getElementById("notice").innerText =
      lang === "hi"
        ? "‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡§Æ‡§ù‡•å‡§§‡•á ‡§ï‡•ã ‡§ß‡•ç‡§Ø‡§æ‡§® ‡§∏‡•á ‡§™‡§¢‡§º‡•á‡§Ç‡•§"
        : "Please read the agreement carefully before continuing.";

    document.getElementById("agreeLabel").innerText =
      lang === "hi"
        ? "‡§Æ‡•à‡§Ç ‡§∏‡§≠‡•Ä ‡§®‡§ø‡§Ø‡§Æ‡•ã‡§Ç ‡§∏‡•á ‡§∏‡§π‡§Æ‡§§ ‡§π‡•Ç‡§Å"
        : "I have read and agree to all terms";
  }

  if (typeof initializeLanguageSelector === "function") {
    initializeLanguageSelector();
  }

  renderAgreement();

  /* ---------------- EVENTS ---------------- */
  agreeCheck.onchange = () => {
    nextBtn.disabled = !agreeCheck.checked;
    clearStatus();
  };

  document.getElementById("speakBtn").onclick = () => {
    if (typeof speak === "function") {
      speak(agreementContent.innerText.slice(0, 1000));
    }
  };

  nextBtn.onclick = async () => {
    clearStatus();

    if (!lead_uid) {
      showStatus("error", "Invalid lead. Please restart the application.");
      return;
    }

    nextBtn.disabled = true;
    agreeCheck.disabled = true;
    showStatus("success", "Saving your acceptance...");

    try {
      const res = await fetch(
        window.CONFIG.BACKEND + "/api/job/agreement-accept",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ lead_uid })
        }
      );

      const out = await res.json();
      if (!out.ok) throw new Error(out.error || "Failed");

      window.location.href =
        "./generate-id.html?lead=" + encodeURIComponent(lead_uid);

    } catch (e) {
      console.error(e);
      showStatus("error", "Network error. Please try again.");
      nextBtn.disabled = false;
      agreeCheck.disabled = false;
    }
  };

})();
</script>

</body>
</html>

